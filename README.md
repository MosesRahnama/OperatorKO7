# OperatorKO7

**CONJECTURE:** No relational operator-only TRS can have its full-system termination proved by internally definable methods.

**MAIN RESULT:** A mechanically-verified certified normalizer for a guarded fragment (`SafeStep`) using a novel triple-lexicographic measure.

**Paper (arXiv):** [https://arxiv.org/abs/2512.00081](https://arxiv.org/abs/2512.00081)  
**Repository:** [https://github.com/MosesRahnama/OperatorKO7](https://github.com/MosesRahnama/OperatorKO7)  
**Contact:** moses.rahnama@live.com

This repository contains the Lean 4 formalization accompanying the paper above.

## Overview (what is proved vs what is conjectured)

KO7 is a minimal rewrite calculus with 7 constructors and 8 rules.

This repository formally verifies (Lean 4):
- **Safe fragment (`SafeStep`)**: strong normalization (SN) and a certified normalizer (total + sound).
- **Confluence (safe fragment)**: derived via Newman's lemma under the stated local-join condition.
- **Impossibility catalog**: machine-checked "no-go" witnesses showing why simpler measures fail under duplication.

This repository does **not** claim a proof of termination for the full kernel `Step` relation; that is the target of the conjecture above.

## Complete file-by-file guide (every file in this repo)

Every file in this repository exists for one of: (i) the paper source/license, (ii) the Lean kernel, (iii) the certified safe fragment, or (iv) small verifier-facing smoke tests.

### Repo root
- **`README.md`**: this landing page (theory-first, then build instructions, then file map).
- **`SAFE_AUDIT.md`**: reader-facing scope audit: a concise “what is proved vs. what is not” map, with pointers to the exact Lean files/lemmas establishing the SafeStep artifact and the explicit full-kernel caveat.
- **`LICENSE`**: Apache-2.0 license for the Lean code in this repository.
- **`lean-toolchain`**: pins the Lean toolchain version used to build the project.
- **`lakefile.lean`**: Lake package config (declares package/library `OperatorKO7`, depends on mathlib).
- **`lake-manifest.json`**: Lake dependency lockfile (generated by Lake).
- **`OperatorKO7.lean`**: the library entry point (umbrella imports for the public build surface).

### Paper
- **`Paper/Rahnama_KO7_Submission.tex`**: paper source (includes direct link to this repo).
- **`Paper/LICENSE`**: CC BY-NC-ND 4.0 legal code + notice for the paper text.

### Lean library (`OperatorKO7/`)
- **`OperatorKO7/Kernel.lean`**: defines `Trace` (7 constructors), the full kernel relation `Step` (8 unconditional rules), and `StepStar`.

### Lean meta-theory (`OperatorKO7/Meta/`)
- **`OperatorKO7/Meta/Termination.lean`**: ordinal/measure toolkit used by the termination development.
- **`OperatorKO7/Meta/Termination_KO7.lean`**: defines the certified safe fragment `SafeStep` and proves SN for it via the triple-lex measure.
- **`OperatorKO7/Meta/ComputableMeasure.lean`**: a fully computable termination certificate for `SafeStep`.
- **`OperatorKO7/Meta/Normalize_Safe.lean`**: certified normalizer for `SafeStep` (total + sound; noncomputable by design).
- **`OperatorKO7/Meta/Newman_Safe.lean`**: Newman engine used to derive confluence for the safe fragment under local-join assumptions.
- **`OperatorKO7/Meta/Confluence_Safe.lean`**: local-join / critical-peak lemmas for the safe fragment; also includes an explicit full-kernel caveat showing the overlap at `eqW` creates a non-joinable peak.
- **`OperatorKO7/Meta/SafeStep_Ctx.lean`**: context-closure utilities for safe steps (used by join proofs).
- **`OperatorKO7/Meta/Impossibility_Lemmas.lean`**: impossibility lemmas supporting the conjecture narrative (failure witnesses for simpler measures).
- **`OperatorKO7/Meta/Operational_Incompleteness.lean`**: the "P1–P3 probes" / operational incompleteness scaffolding (namespace `OperatorKO7.OpIncomp`).
- **`OperatorKO7/Meta/ContractProbes.lean`**: small auxiliary probes referenced by the impossibility story.
- **`OperatorKO7/Meta/DM_MPO_Orientation.lean`**: helper lemmas for DM/MPO orientations used in the measures.
- **`OperatorKO7/Meta/CNFOrdinal.lean`**: ordinal/CNF support (used by ordinal-based parts of the development).
- **`OperatorKO7/Meta/GoodsteinCore.lean`**: small, independent Goodstein-style toy core (exposition/witness support).
- **`OperatorKO7/Meta/HydraCore.lean`**: small, independent Hydra-style toy core (exposition/witness support).
- **`OperatorKO7/Meta/FailureModes.lean`**: negative tests / counterexample sketches documenting why naive reasoning fails (kept in the main tree as part of the theory story).
- **`OperatorKO7/Meta/ComputableMeasure_Test.lean`**: small Lean checks that the computable measure API is present (smoke tests).
- **`OperatorKO7/Meta/ComputableMeasure_Verification.lean`**: extra verification lemmas/examples for the computable measure (non-essential but kept for reproducibility).

### Lean tests (`OperatorKO7/Test/`)
- **`OperatorKO7/Test/Sanity.lean`**: minimal test file imported by the build to ensure the package compiles in CI and on fresh machines.

*(The sections below were consolidated into the single file-by-file map above.)*

## How to build

Run:

```bash
lake build
```

## Licensing

- **Lean code**: Apache-2.0 (see `LICENSE` at repo root).
- **Paper text**: CC BY-NC-ND 4.0 (see `Paper/LICENSE`).

For commercial permissions (paper or alternative terms), contact: `moses@minaanalytics.com`


> **CONNECTIVITY & VERIFICATION DISCLAIMER (January 2026)**
> This repository was uploaded from **Iran** under severe internet restrictions. 
> *   All files were verified green (compiling successfully) during the paper's initial drafting in **November 2025**.
> *   The current "organized" release candidate (this standalone package) has been structured offline but could not be freshly compiled against remote dependencies due to connection blocks.
> *   Any discrepancies or dependency errors will be resolved immediately once stable internet access is restored. The logic remains unchanged from the verified November snapshot.

